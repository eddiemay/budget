<?xml version="1.0" encoding="UTF-8"?>
<DOMAIN name="budget">
  <IMPORT name="common"/>
  <CLASS name="Portfolio">
  	<ATTRIBUTE name="Id" type="id" nullable="false" id="true" generated="true"/>
    <ATTRIBUTE name="Name" type="string" size="32" nullable="false" />
  </CLASS>
  <CLASS name="User Portfolio">
  	<ATTRIBUTE name="Id" type="id" nullable="false" id="true" generated="true" />
  	<ATTRIBUTE name="User Id" type="id" nullable="false" />
  	<ATTRIBUTE name="Portfolio Id" type="id" nullable="false" />
    <ATTRIBUTE name="Role Id" type="id" nullable="false" />
    <REFERENCE refclass="User" indexed="false">
      <CONNECTOR attribute="User Id" refattr="Id" />
    </REFERENCE>
    <REFERENCE refclass="Portfolio" indexed="true">
      <CONNECTOR attribute="Portfolio Id" refattr="Id" />
    </REFERENCE>
    <REFERENCE refclass="General Data" indexed="false" name="Role" >
      <CONNECTOR attribute="Role Id" refattr="Id" />
    </REFERENCE>
  </CLASS>
  <CLASS name="Account">
    <ATTRIBUTE name="Id" type="id" nullable="false" id="true" generated="true"/>
    <ATTRIBUTE name="Portfolio Id" type="id" nullable="false" />
    <ATTRIBUTE name="Name" type="string" size="32" nullable="false" />
    <ATTRIBUTE name="Payment Account" type="boolean" />
  	<ATTRIBUTE name="Parent Account Id" type="id"/>
    <REFERENCE refclass="Portfolio" indexed="true">
      <CONNECTOR attribute="Portfolio Id" refattr="Id" />
    </REFERENCE>
    <REFERENCE refclass="Account" indexed="true" name="Parent" >
      <CONNECTOR attribute="Parent Account Id" refattr="Id" />
    </REFERENCE>
  </CLASS>
  <CLASS name="Bill">
    <ATTRIBUTE name="Id" type="id" nullable="false" id="true" generated="true"/>
    <ATTRIBUTE name="Account Id" type="Id" nullable="false" />
    <ATTRIBUTE name="Template Id" type="Id" />
    <ATTRIBUTE name="Due Date" type="date" />
    <ATTRIBUTE name="Name D" type="String" size="50" />
    <ATTRIBUTE name="Payment Date D" type="date" />
    <ATTRIBUTE name="Amount Due D" type="double" />
    <ATTRIBUTE name="Status Id" type="id" />
    <ATTRIBUTE name="Active" type="boolean" default="1" />
    <ATTRIBUTE name="Description" type="String" size="256" />
    <REFERENCE refclass="Account" indexed="true" >
      <CONNECTOR attribute="Account Id" refattr="ID" />
    </REFERENCE>
    <REFERENCE refclass="General Data" indexed="false" name="Status">
      <CONNECTOR attribute="Status Id" refattr="Id" />
    </REFERENCE>
    <REFERENCE refclass="Template" indexed="false">
      <CONNECTOR attribute="Template Id" refattr="Id" />
    </REFERENCE>
  </CLASS>
  <CLASS name="Transaction">
    <ATTRIBUTE name="Id" type="id" nullable="false" id="true" generated="true"/>
    <ATTRIBUTE name="Date D" type="date" />
    <ATTRIBUTE name="Name D" type="String" size="64" />
    <ATTRIBUTE name="Bill Id" type="Id" />
    <ATTRIBUTE name="Debit Account Id" type="Id" nullable="false" />
    <ATTRIBUTE name="Credit Account Id" type="Id"/>
    <ATTRIBUTE name="Amount" type="double" />
    <ATTRIBUTE name="Status Id" type="id" />
    <ATTRIBUTE name="ACTIVE" type="boolean" default="1" />
    <ATTRIBUTE name="DESCRIPTION" type="String" size="256" />
    <REFERENCE refclass="Bill" indexed="true" >
      <CONNECTOR attribute="Bill Id" refattr="ID" />
    </REFERENCE>
    <REFERENCE refclass="Account" indexed="true" name="Debit Account" refname="Debit Transaction">
      <CONNECTOR attribute="Debit Account Id" refattr="Id" />
    </REFERENCE>
    <REFERENCE refclass="Account" indexed="true" name="Credit Account" refname="Credit Transaction">
      <CONNECTOR attribute="Credit Account Id" refattr="Id" />
    </REFERENCE>
    <REFERENCE refclass="General Data" indexed="false" name="Status" >
      <CONNECTOR attribute="Status Id" refattr="Id" />
    </REFERENCE>
  </CLASS>
  <CLASS name="Template">
    <ATTRIBUTE name="Id" type="id" nullable="false" id="true" generated="true"/>
    <ATTRIBUTE name="Portfolio Id" type="id" nullable="false" />
    <ATTRIBUTE name="Name" type="string" size="32" nullable="false" />
    <REFERENCE refclass="Portfolio" indexed="true">
      <CONNECTOR attribute="Portfolio Id" refattr="Id" />
    </REFERENCE>
  </CLASS>
  <CLASS name="Template Bill">
    <ATTRIBUTE name="Id" type="id" nullable="false" id="true" generated="true"/>
    <ATTRIBUTE name="Template Id" type="Id" nullable="false" />
    <ATTRIBUTE name="Account Id" type="Id" nullable="false" />
    <ATTRIBUTE name="Due Day" type="int" />
    <ATTRIBUTE name="Name D" type="String" size="50" />
    <ATTRIBUTE name="Amount Due" type="double" />
    <ATTRIBUTE name="Active" type="boolean" default="1" />
    <ATTRIBUTE name="Description" type="String" size="256" />
    <REFERENCE refclass="Template" indexed="true" >
      <CONNECTOR attribute="Template Id" refattr="ID" />
    </REFERENCE>
    <REFERENCE refclass="Account" indexed="false" >
      <CONNECTOR attribute="Account Id" refattr="ID" />
    </REFERENCE>
  </CLASS>
  <CLASS name="Template Transaction">
    <ATTRIBUTE name="Id" type="id" nullable="false" id="true" generated="true"/>
    <ATTRIBUTE name="Template Bill Id" type="Id" nullable="false" />
    <ATTRIBUTE name="Debit Account Id" type="Id" nullable="false" />
    <ATTRIBUTE name="Amount" type="double" />
    <REFERENCE refclass="Template Bill" indexed="true" >
      <CONNECTOR attribute="Template Bill Id" refattr="ID" />
    </REFERENCE>
    <REFERENCE refclass="Account" indexed="false" name="Debit Account" refname="Debit Transaction">
      <CONNECTOR attribute="Debit Account Id" refattr="Id" />
    </REFERENCE>
  </CLASS>
</DOMAIN>